/* Admin-specific responsive styles */

/* Base admin layout styles - Desktop optimized */
.admin-layout {
  position: relative;
}

/* Mobile-specific overflow fixes */
@media screen and (max-width: 768px) {
  .admin-layout {
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
}

/* Safari specific fixes - Applied with proper media queries */
@supports (-webkit-appearance: none) {
  /* Desktop Safari */
  @media screen and (min-width: 769px) {
    .admin-layout {
      /* Allow natural width on desktop */
      width: auto;
      max-width: none;
    }
  }
  
  /* Mobile Safari */
  @media screen and (max-width: 768px) {
    .admin-layout {
      width: 100vw !important;
      max-width: 100vw !important;
      overflow-x: hidden !important;
      position: relative;
    }
    
    /* Container constraints for mobile */
    .admin-layout main,
    .admin-layout section,
    .admin-layout article,
    .admin-layout div,
    .admin-layout form {
      max-width: 100vw !important;
      overflow-x: hidden !important;
      box-sizing: border-box !important;
    }
  }
  
  /* Responsive table optimizations */
  @media screen and (max-width: 768px) {
    .admin-layout .responsive-table-mobile {
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
      -webkit-overflow-scrolling: touch;
      overflow-scrolling: touch;
      max-width: 100vw !important;
      overflow-x: auto !important;
    }
  }
  
  /* Card sizing by breakpoint */
  @media screen and (min-width: 769px) {
    /* Desktop cards - natural sizing */
    .admin-layout .card,
    .admin-layout [class*="card"],
    .admin-layout [data-card] {
      max-width: none;
      box-sizing: border-box;
    }
  }
  
  @media screen and (max-width: 768px) {
    /* Mobile cards - constrained width */
    .admin-layout .card,
    .admin-layout [class*="card"],
    .admin-layout [data-card] {
      max-width: calc(100vw - 2rem) !important;
      overflow: hidden !important;
      box-sizing: border-box !important;
      margin-left: auto;
      margin-right: auto;
    }
  }
  
  /* Grid and flex containers - Mobile only constraints */
  @media screen and (max-width: 768px) {
    .admin-layout .grid,
    .admin-layout [class*="grid-"],
    .admin-layout .flex,
    .admin-layout [class*="flex"] {
      max-width: 100vw !important;
      overflow-x: hidden !important;
      box-sizing: border-box !important;
    }
  }
}

/* Mobile-specific enhancements */
@media screen and (max-width: 768px) {
  /* Base mobile constraints */
  .admin-layout {
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
  
  /* Admin input zoom prevention */
  .admin-layout input[type="text"],
  .admin-layout input[type="email"],
  .admin-layout input[type="password"],
  .admin-layout input[type="search"],
  .admin-layout input[type="tel"],
  .admin-layout input[type="number"],
  .admin-layout input[type="date"],
  .admin-layout textarea,
  .admin-layout select {
    font-size: 16px !important;
    max-width: calc(100vw - 2rem) !important;
    box-sizing: border-box !important;
  }
  
  /* Admin safe area adjustments */
  .admin-layout {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
  
  /* Admin containers */
  .admin-layout main,
  .admin-layout section,
  .admin-layout article,
  .admin-layout div,
  .admin-layout nav,
  .admin-layout header,
  .admin-layout footer,
  .admin-layout form {
    max-width: 100vw !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
  }
  
  /* Mobile button constraints */
  .admin-layout button,
  .admin-layout [role="button"],
  .admin-layout .btn,
  .admin-layout [class*="button"],
  .admin-layout a[class*="button"] {
    max-width: calc(100vw - 2rem) !important;
    box-sizing: border-box !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  /* Mobile table constraints */
  .admin-layout table,
  .admin-layout .table,
  .admin-layout [class*="table"] {
    max-width: 100vw !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
  }
  
  /* Mobile search containers */
  .admin-layout .search-container,
  .admin-layout [class*="search"],
  .admin-layout .input-group,
  .admin-layout [class*="input"] {
    max-width: calc(100vw - 2rem) !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
  }
}

/* Safari Icon Fixes */
@supports (-webkit-appearance: none) {
  /* Force Safari to render Lucide icons properly */
  .lucide,
  svg.lucide {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
  
  /* Specific fix for icons in buttons */
  button svg,
  [role="button"] svg {
    display: inline-block;
    vertical-align: middle;
    width: 1em;
    height: 1em;
    stroke-width: 2;
    stroke: currentColor;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  
  /* Fix for the delete button specifically */
  .text-destructive svg {
    color: hsl(var(--destructive)) !important;
    opacity: 0.999; /* Triggers repaint in Safari */
  }
  
  /* Force icon visibility in Safari */
  .admin-layout button svg,
  .admin-layout [role="button"] svg {
    -webkit-appearance: none;
    appearance: none;
    visibility: visible !important;
    opacity: 0.999; /* Force repaint */
  }
}

/* Enhanced Safari Mobile Icon Fixes */
@media screen and (max-width: 768px) {
  @supports (-webkit-appearance: none) {
    /* Force all button icons to show on mobile Safari */
    button svg,
    [role="button"] svg,
    .safari-icon-fix svg {
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      width: 16px !important;
      height: 16px !important;
      min-width: 16px !important;
      min-height: 16px !important;
      stroke: currentColor !important;
      stroke-width: 2px !important;
      fill: none !important;
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
    }
    
    /* Specific fix for destructive (delete) buttons */
    .text-destructive {
      color: hsl(var(--destructive)) !important;
    }
    
    /* Ensure Trash2 icon specifically works */
    .lucide-trash-2 {
      display: inline-block !important;
      visibility: visible !important;
    }
    
    /* Force repaint on all icon buttons */
    button:has(svg) {
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
      -webkit-font-smoothing: antialiased;
    }
  }
}