# 管理後台使用指南

## 概述

MovieBonus 管理後台提供了完整的回報管理功能，讓管理員能夠查看、篩選和處理使用者提交的回報。

## 功能特色

### 1. 基本認證保護
- 使用簡易密碼認證（適合小型專案）
- 支援 Cookie 和 Header 兩種認證方式
- 自動重定向未授權訪問

### 2. 回報管理功能
- **查看所有回報**：完整的回報列表和詳細資訊
- **多維度篩選**：
  - 狀態篩選（待處理、處理中、已解決、已關閉、垃圾）
  - 類型篩選（特典補完、意見建議、資料修正）
  - 日期範圍篩選
  - 關鍵字搜尋
- **狀態更新**：快速更新回報處理狀態
- **管理員備註**：為每個回報添加內部備註
- **分頁功能**：優化大量資料的瀏覽體驗

### 3. 儀表板統計
- 回報總數和各狀態統計
- 回報類型分布
- 快速操作連結

### 4. 響應式設計
- 完整支援桌面和行動裝置
- 側邊欄自動適應螢幕大小

## 設定指南

### 環境變數配置

在 `.env.local` 中設定以下變數：

```env
# 管理員密碼（用於登入）
ADMIN_PASSWORD=your-secure-password

# 管理員 Token（用於驗證）
ADMIN_TOKEN=your-secure-token

# Supabase 配置
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

### 資料庫設定

確保已在 Supabase 中執行 `FEEDBACK_DATABASE_SCHEMA.sql` 以建立必要的資料表。

## 使用說明

### 1. 登入管理後台

1. 訪問 `/admin` 路徑
2. 系統會自動重定向到 `/admin/login`
3. 輸入管理員密碼
4. 成功登入後會跳轉到儀表板

### 2. 查看回報

1. 點擊側邊欄的「回報管理」
2. 使用篩選器縮小查看範圍
3. 點擊「檢視」按鈕查看詳細資訊

### 3. 處理回報

1. 在詳細視窗中切換到「管理操作」標籤
2. 選擇新的狀態
3. 添加管理員備註（選填）
4. 點擊「儲存變更」

### 4. 特典補完資訊

對於「特典補完」類型的回報，可以在「特典資訊」標籤中查看：
- 電影名稱和影城資訊
- 特典詳細內容
- 活動期間和取得方式
- 資料來源

## API 端點

管理後台使用以下 API：

- `POST /api/admin/login` - 管理員登入
- `POST /api/admin/logout` - 管理員登出
- `POST /api/feedback/submit` - 提交回報（前台使用）

## 安全性考量

1. **密碼保護**：確保使用強密碼
2. **環境變數**：不要將敏感資訊提交到版本控制
3. **HTTPS**：生產環境務必使用 HTTPS
4. **定期更換**：定期更換管理員密碼和 Token

## 擴展建議

未來可以考慮的功能擴展：

1. **使用者管理**：完整的使用者權限系統
2. **審計日誌**：記錄所有管理操作
3. **批次操作**：同時處理多個回報
4. **匯出功能**：將回報資料匯出為 CSV/Excel
5. **通知系統**：新回報通知管理員
6. **統計圖表**：視覺化的資料分析

## 故障排除

### 無法登入
- 檢查環境變數是否正確設定
- 確認密碼輸入正確
- 查看瀏覽器控制台是否有錯誤訊息

### 資料載入失敗
- 檢查 Supabase 連線是否正常
- 確認資料表已正確建立
- 查看網路請求是否有錯誤

### 頁面樣式異常
- 清除瀏覽器快取
- 確認所有依賴套件已安裝
- 檢查是否有 CSS 衝突

## 技術架構

- **前端框架**：Next.js 14 (App Router)
- **UI 組件**：shadcn/ui
- **狀態管理**：React Hooks
- **資料庫**：Supabase (PostgreSQL)
- **樣式**：Tailwind CSS
- **圖標**：Lucide Icons

## 開發者資訊

如需進一步自訂或擴展功能，請參考：
- `/src/app/admin/` - 管理後台頁面
- `/src/lib/supabase-client.ts` - Supabase 客戶端
- `/middleware.ts` - 認證中間件